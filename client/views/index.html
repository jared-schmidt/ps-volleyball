<head>
    <title>ps-volleyball</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" sizes="16x16 32x32" href="/logo.png">
    <!-- Meta tags that set up the page as a mobile page   -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet" />
</head>

<body>
    <nav style='padding: 0 20px;'>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">PS-VolleyBall</a>
            <ul id="nav-mobile" class="right">
                <li>{{> loginButtons}}</li>
            </ul>
        </div>
    </nav>
    <div style='width: 88%; margin: 0 auto;'>
        {{#if currentUser}}
            {{> hello}}
        {{else}}
            <div id="loading-div">
                <img src="/spinning_volleyball.gif" /> Doing something....or maybe doing nothing....
            </div>
        {{/if}}
    </div>
    {{> meteorStatus}}

    <script>
        $.fn.poshytip = {
            defaults: null
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/jquery-editable/js/jquery-editable-poshytip.min.js"></script>
</body>



<template name="hello">

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
        <div class="modal-content">
            <h4>Create New Teams</h4>
            <p>
                This will create new team, and overwrite any currectly existing teams.
            </p>
        </div>
        <div class="modal-footer">
            <a href="#!" id='createTeams' class=" modal-action modal-close waves-effect waves-green btn-flat">Random</a>
            <a href="#!" id='createTeamsOptimized' class=" modal-action modal-close waves-effect waves-green btn-flat">optimized</a>
        </div>
    </div>
    <div id="endSeasonModal" class="modal">
        <div class="modal-content">
            <h3>THIS CAN NOT BE UNDONE!</h3>
            <h4>This will end the season</h4>
            <p>This will clear all past teams, records and current player stats</p>
        </div>
        <div class="modal-footer">
            <a href="#!" id='endSeason' class=" modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
        </div>
    </div>
    <div id="winningWay" class="modal">
        <div class="modal-content">
            <h4>How did the team win</h4>
        </div>
        <div class="modal-footer">
            <a href="#!" data-tie='true' class=" modal-action modal-close waves-effect waves-green btn-flat winningWay">Tie-Breaker</a>
            <a href="#!" data-tie='false' class=" modal-action modal-close waves-effect waves-green btn-flat winningWay">No Tie-Breaker</a>
        </div>
    </div>
    <div id="weatherModal" class="modal">
        <div class="modal-content">
            <a href="http://www.accuweather.com/en/us/johnstown-pa/15904/current-weather/6405_pc" class="aw-widget-legal">
            <!--
            By accessing and/or using this code snippet, you agree to AccuWeather’s terms and conditions (in English) which can be found at http://www.accuweather.com/en/free-weather-widgets/terms and AccuWeather’s Privacy Statement (in English) which can be found at http://www.accuweather.com/en/privacy.
            -->
            </a><div id="awtd1463523327622" class="aw-widget-36hour"  data-locationkey="6405_PC" data-unit="f" data-language="en-us" data-useip="false" data-uid="awtd1463523327622" data-editlocation="true"></div><script type="text/javascript" src="http://oap.accuweather.com/launch.js"></script>
        </div>
        <div class="modal-footer">

        </div>
    </div>
    <div class="row">
        <div class="col s12 m6">
            <label>YOUR STATUS:</label>
            <div class="switch">
                <label>
                    Inactive
                    <input type="checkbox" id='activeSelect' checked= {{isActive}}>
                    <span class="lever"></span> Active
                </label>
                <a style="margin-left: 20px;" class="waves-effect waves-light btn modal-trigger" id="WeatherBtn" href="#weatherModal">View Weather</a>
            </div>
        </div>
    </div>
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
        <a class="btn-floating btn-large red">
            <i class="fa fa-folder"></i>
        </a>
        <ul>
            <li>
                <a href='#' id='byeClippy' class="btn-floating red darken-1"><i class="fa fa-lemon-o"></i></a>
            </li>
            <li>
                <a href='#' id='endSeasonModalBtn' class="btn-floating red darken-1"><i class="fa fa-trash-o"></i></a>
            </li>
            <li>
                <a target='_blank' href='https://github.com/jared-schmidt/ps-volleyball' class="btn-floating yellow darken-1"><i class="fa fa-github"></i></a>
            </li>
            <li>
                <a target='_blank' href='https://docs.google.com/document/d/1D_S-2xNvmcWxbq5dUv8JpWEPPLynKI3GTYT8Ije5mS0/edit' class="btn-floating green"><i class="fa fa-book"></i></a>
            </li>
            <li>
                <a href='#' id='teamsModal' class="btn-floating blue"><i class="fa fa-plus"></i></a>
            </li>
        </ul>
    </div>
    
    <!-- Teams -->
    <div class="row">
        <!-- Away Team -->
        {{#if team2.team}}
            {{> team teamId="2" team=team2 teamHeader="Away (Road)" }}
        {{/if}}
        <!-- Home Team -->
        {{#if team1.team}}
            {{> team teamId="1" team=team1 teamHeader="Home (Parking)" }}
        {{/if}}
    </div>

    <!-- Roster -->
        <div class="row">
            <div class="col s12 m12">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                        <span class="card-title">Roster (Active: {{activePlayers}})</span>
                        <table class="responsive-table">
                            <thead>
                                <th></th>
                                {{#if isAdmin}}
                                    <th>Retire</th>
                                    <th>Add to teadm</th>
                                {{/if}}
                                <th>Name</th>
                                <th>Title</th>
                                <th>Active</th>
                            </thead>
                            <tbody>
                                {{#each players}}
                                    <tr>
                                        <td><img height="32" width="32" src="{{services.google.picture}}" /></td>
                                        {{#if isAdmin}}
                                            <td><a href='#' id='retire'>Retire</a>{{profile.retired}}</td>
                                            <td><a href='#' id='makeHome'>Home</a> | <a id='makeAway' href='#'>Away</a></td>
                                        {{/if}}
                                        <td>{{profile.name}}</td>
                                        <td>
                                            {{#if isAdmin}}
                                                {{> xEditable type="text" success=onSuccess placement="right" value=profile.title mode='inline'}}
                                            {{else}}
                                                {{profile.title}}
                                            {{/if}}
                                        </td>
                                        <td>
                                            {{#if isAdmin}}
                                                <div class="switch">
                                                    <label>
                                                        <input type="checkbox" class="user-active-toggle" checked= {{profile.active}} />
                                                        <span class="lever"></span>
                                                    </label>
                                                </div>
                                            {{else}}
                                                {{booleanToString(profile.active)}}
                                            {{/if}}
                                        </td>
                                    </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                    {{#if isSuperAdmin}}
                        <div class="card-action">
                            <a id='fix' href="#">Update Stats</a>
                            <a id='pastData' href="#">Past Data</a>
                            <!-- <a id='highest' href="#">Records</a> -->
                        </div>
                    {{/if}}
                </div>
            </div>
        </div>

    <!-- Stats -->
    {{> stats}}

    <!-- Records -->
    {{> records}}

    <!-- Past Teams -->
    {{> pastTeams}}

    <!-- Retired Players -->
    {{> retiredPlayers}}

</template>

